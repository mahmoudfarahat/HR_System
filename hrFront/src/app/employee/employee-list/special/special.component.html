 
<button (click)="addNew()">Add</button>

<ng-container *ngFor="let row of rows; let j = index; trackBy: trackByIndex">
  <div class="parent">
    {{ j }}
    <button (click)="addChildNew(row)">Add</button>
    <button (click)="addInput(row)">Add inside</button>

    <div *ngFor="let insiderow of row.insiderows; let i = index; trackBy: trackByIndex">
      <input type="text" [(ngModel)]="insiderow.search" />
    </div>

    <ng-container *ngTemplateOutlet="recursiveRow; context:{ rows: row.row, parentIndex: j + '-'}">
    </ng-container>
  </div>
</ng-container>

<ng-template #recursiveRow let-rows="rows" let-parentIndex="parentIndex">
  <ng-container *ngFor="let childRow of rows; let o = index; trackBy: trackByIndex">
    <div class="child">
      {{ parentIndex }}{{ o }}
      <button (click)="addChildNew(childRow)">Add</button>
      <button (click)="addNestedInput(childRow)">Add inside</button>

      <div *ngFor="let insiderow of childRow.insiderows; let y = index; trackBy: trackByIndex">
        <input type="text" [(ngModel)]="insiderow.search" />
      </div>

      <ng-container *ngTemplateOutlet="recursiveRow; context:{ rows: childRow.row, parentIndex: parentIndex + o + '-'}">
      </ng-container>
    </div>
  </ng-container>
</ng-template>
